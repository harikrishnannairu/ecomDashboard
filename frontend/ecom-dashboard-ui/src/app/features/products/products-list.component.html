<!-- <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6">
  <div class="flex justify-between mb-4">
    <input
      type="text"
      [(ngModel)]="searchTerm"
      (input)="search()"
      placeholder="Search products..."
      class="border dark:border-gray-600 rounded px-3 py-2 bg-gray-50 dark:bg-gray-700 text-sm w-1/3"
    />
    <button class="bg-blue-600 text-white px-4 py-2 rounded">+ Add Product</button>
  </div>

  <table class="w-full text-left border-collapse">
    <thead>
      <tr class="bg-gray-100 dark:bg-gray-700">
        <th class="p-3">Name</th>
        <th class="p-3">Description</th>
        <th class="p-3">Price</th>
        <th class="p-3">Stock</th>
        <th class="p-3">Created By</th>
        <th class="p-3">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let product of paginated" class="border-b dark:border-gray-600">
        <td class="p-3">{{ product.name }}</td>
        <td class="p-3">{{ product.description }}</td>
        <td class="p-3">{{ product.price | currency }}</td>
        <td class="p-3">{{ product.stock }}</td>
        <td class="p-3">{{ product.createdBy }}</td>
        <td class="p-3 flex gap-2">
          <button class="bg-green-500 text-white px-3 py-1 rounded" (click)="openEditDialog(p)">Edit</button>
          <button class="bg-red-500 text-white px-3 py-1 rounded ml-2" (click)="deleteProduct(p.id)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
-->
  <!-- Pagination -->
   <!--<div class="flex justify-end mt-4 gap-2">
    <button
      (click)="page = page - 1"
      [disabled]="page === 1"
      class="px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded disabled:opacity-50"
    >
      Prev
    </button>
    <span class="px-2">Page {{ page }} of {{ totalPages() }}</span>
    <button
      (click)="page = page + 1"
      [disabled]="page === totalPages()"
      class="px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded disabled:opacity-50"
    >
      Next
    </button>
  </div>
</div> -->

 <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6">
  <div class="flex justify-between mb-4">
    <input
      type="text"
      [(ngModel)]="searchTerm"
      (input)="search()"
      placeholder="Search products..."
      class="border dark:border-gray-600 rounded px-3 py-2 bg-gray-50 dark:bg-gray-700 text-sm w-1/3"
    />
    <button 
      (click)="openCreateDialog()" 
      class="bg-blue-600 text-white px-4 py-2 rounded">
      + Add Product
    </button>
  </div>

  <table class="w-full text-left border-collapse">
    <thead>
      <tr class="bg-gray-100 dark:bg-gray-700">
        <th class="p-3">Name</th>
        <th class="p-3">Description</th>
        <th class="p-3">Price</th>
        <th class="p-3">Stock</th>
        <th class="p-3">Created By</th>
        <th class="p-3">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let product of paginated" class="border-b dark:border-gray-600">
        <td class="p-3">{{ product.name }}</td>
        <td class="p-3">{{ product.description }}</td>
        <td class="p-3">{{ product.price | currency }}</td>
        <td class="p-3">{{ product.stock }}</td>
        <td class="p-3">{{ product.createdBy }}</td>
        <td class="p-3 flex gap-2">
          <button 
            class="bg-green-500 text-white px-3 py-1 rounded"
            (click)="openEditDialog(product)">
            Edit
          </button>
          <button 
            class="bg-red-500 text-white px-3 py-1 rounded ml-2"
            (click)="deleteProduct(product.id)">
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Pagination -->
  <div class="flex justify-end mt-4 gap-2">
    <button
      (click)="page = page - 1"
      [disabled]="page === 1"
      class="px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded disabled:opacity-50"
    >
      Prev
    </button>
    <span class="px-2">Page {{ page }} of {{ totalPages() }}</span>
    <button
      (click)="page = page + 1"
      [disabled]="page === totalPages()"
      class="px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded disabled:opacity-50"
    >
      Next
    </button>
  </div>
</div>

<!-- Modal -->
<div *ngIf="showModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-96">
    <h2 class="text-lg font-semibold mb-4">
      {{ isEdit ? 'Edit Product' : 'Create Product' }}
    </h2>

    <form [formGroup]="productForm" (ngSubmit)="saveProduct()">
      <div class="mb-3">
        <label class="block text-sm">Name *</label>
        <input formControlName="name" type="text" class="w-full border rounded px-3 py-2  dark:bg-gray-700" [class.border-red-500]="isInvalid('name')" />
        <p *ngIf="isInvalid('name')" class="text-red-500 text-xs mt-1">
          Name is required.
        </p>
      </div>

      <div class="mb-3 ">
        <label class="block text-sm">Description</label>
        <textarea formControlName="description" class="w-full border dark:border-gray-600 dark:bg-gray-700 rounded px-3 py-2"></textarea>
      </div>

      <div class="mb-3 ">
        <label class="block text-sm">Price *</label>
        <input formControlName="price" type="number" class="w-full border rounded px-3 py-2 dark:bg-gray-700"  [class.border-red-500]="isInvalid('price')" />
        <p *ngIf="isInvalid('price')" class="text-red-500 text-xs mt-1">
          Price must be greater than 0.
        </p>
      </div>

      <div class="mb-3 ">
        <label class="block text-sm">Stock *</label>
        <input formControlName="stock" type="number" class="w-full border rounded px-3 py-2 dark:bg-gray-700" [class.border-red-500]="isInvalid('stock')"/>
        <p *ngIf="isInvalid('stock')" class="text-red-500 text-xs mt-1">
          Stock must be 0 or more.
        </p>
      </div>

      <div class="flex justify-end gap-2 mt-4 ">
        <button type="button" (click)="closeModal()" class="px-4 py-2 bg-gray-300 rounded dark:bg-gray-700">Cancel</button>
        <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded " >
          {{ isEdit ? 'Update' : 'Save' }}
        </button>
      </div>
    </form>
  </div>
</div>

