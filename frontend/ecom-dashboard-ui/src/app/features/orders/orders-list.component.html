<div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6">
  <div class="flex justify-between mb-4">
    <input
      type="text"
      [(ngModel)]="searchTerm"
      (input)="search()"
      placeholder="Search by Order ID or User..."
      class="border dark:border-gray-600 rounded px-3 py-2 bg-gray-50 dark:bg-gray-700 text-sm w-1/3"
    />
  </div>

  <div *ngIf="loading" class="text-center py-4">Loading...</div>

  <table *ngIf="!loading && orders.length > 0" class="w-full text-left border-collapse">
    <thead>
      <tr class="bg-gray-100 dark:bg-gray-700">
        <th class="p-3">Order ID</th>
        <th class="p-3">Customer</th>
        <th class="p-3">Status</th>
        <th class="p-3">Total Amount</th>
        <th class="p-3">Created At</th>
        <th class="p-3">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let order of orders" class="border-b dark:border-gray-600">
        <td class="p-3">{{ order.id }}</td>
        <td class="p-3">{{ order?.createdBy }}</td>
        <td class="p-3">{{ order.status }}</td>
        <td class="p-3">{{ order.totalAmount | currency }}</td>
        <td class="p-3">{{ order.createdAt | date:'short' }}</td>
        <td class="p-3 flex gap-2">
          <button class="bg-green-500 text-white px-3 py-1 rounded" (click)="openOrder(order)">View / Update</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="!loading && orders.length === 0" class="text-center py-4">
    No orders found.
  </div>

  <!-- Pagination -->
  <div class="flex justify-end mt-4 gap-2" *ngIf="totalPages > 1">
    <button
      (click)="changePage(page - 1)"
      [disabled]="page === 0"
      class="px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded disabled:opacity-50"
    >
      Prev
    </button>
    <span class="px-2">Page {{ page + 1 }} of {{ totalPages }}</span>
    <button
      (click)="changePage(page + 1)"
      [disabled]="page >= totalPages - 1"
      class="px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded disabled:opacity-50"
    >
      Next
    </button>
  </div>
  <app-order-details-modal
  *ngIf="selectedOrder"
  [order]="selectedOrder"
  (closed)="selectedOrder = null"
  (updated)="onOrderUpdated($event)">
</app-order-details-modal>

</div>
